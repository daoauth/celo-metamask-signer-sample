(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{309:function(e,t,n){var content=n(759);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(29).default)("1b7833da",content,!0,{sourceMap:!1})},425:function(e,t){},427:function(e,t){},440:function(e,t){},441:function(e,t){},465:function(e,t){},467:function(e,t){},478:function(e,t){},515:function(e,t){},517:function(e,t){},523:function(e,t){},558:function(e,t){},757:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},758:function(e,t,n){"use strict";var r=n(309);n.n(r).a},759:function(e,t,n){(t=n(28)(!1)).push([e.i,".card{border-radius:25px}.main{margin:0 auto;min-height:60vh;display:flex;justify-content:center;align-items:center;text-align:center}.footer{position:absolute;width:100%;bottom:0;overflow:hidden}",""]),e.exports=t},763:function(e,t,n){"use strict";n.r(t);n(25);var r=n(6),o=n(204),c={props:{account:{type:String,default:null},tokens:{type:Array,default:function(){return[]}},busy:{type:Boolean,default:!1},contracts:{type:Object,default:null},estimateFee:{type:Function,default:function(e){return null}},sendTransaction:{type:Function,default:function(e){}},settings:{type:Object,default:function(){return{slippageTolerance:null,transactionDeadline:null}}}},watch:{settings:{deep:!0,handler:function(e){this.$emit("update",e)}}},methods:{createRawTx:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.approve.fee){n.next=5;break}return r=o.hexToNumberString("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),c=t.contracts.erc20.methods.approve(t.contracts.exchange.options.address,o.toWei(r)).encodeABI(),n.next=5,t.sendTransaction("Approve",{from:t.account,to:e.address,data:c});case 5:case"end":return n.stop()}}),n)})))()}}},l=n(27),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container px-2"},[n("fieldset",{attrs:{disabled:!e.account}},e._l(e.tokens,(function(t,r){return n("div",{key:r,staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{class:"control has-icons-left is-expanded "+(e.account?"":"is-loading")},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.balance,expression:"item.balance"}],staticClass:"input is-small is-family-monospace",attrs:{type:"text",readonly:""},domProps:{value:t.balance},on:{input:function(n){n.target.composing||e.$set(t,"balance",n.target.value)}}}),e._v(" "),n("span",{staticClass:"icon is-left"},[n("img",{attrs:{src:t.icon}})])]),e._v(" "),n("p",{staticClass:"control"},[n("a",{staticClass:"button is-small",attrs:{disabled:e.busy||!e.account||!t.approve.fee},on:{click:function(n){return e.createRawTx(t)}}},[e._m(0,!0)])])])])])])})),0)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-unlock"})])}],!1,null,null,null);t.default=component.exports},764:function(e,t,n){"use strict";n.r(t);n(25);var r=n(6),o=n(204),c={props:{account:{type:String,default:null},tokens:{type:Array,default:function(){return[]}},busy:{type:Boolean,default:!1},contracts:{type:Object,default:null},estimateFee:{type:Function,default:function(e){return null}},sendTransaction:{type:Function,default:function(e){}}},data:function(){return{fee:"",feeState:"",disabled:!0,txValue:"0.0",txTokenId:0,txTo:""}},watch:{txValue:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.updateFee({value:e});case 2:case"end":return n.stop()}}),n)})))()},txTo:function(address){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateFee({address:address});case 2:case"end":return t.stop()}}),t)})))()}},methods:{onChangeCurrency:function(e){switch(e.target.value){case"CELO":this.fee="",this.feeState="",this.disabled=!0,this.txValue="0.0",this.txTokenId=0,this.txTo="";break;case"cUSD":this.fee="",this.feeState="",this.disabled=!0,this.txValue="0.0",this.txTokenId=1,this.txTo=""}},updateFee:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==e.address?t.disabled=""===e.address||!o.isAddress(e.address)||""===t.txValue||"0"===o.toWei(t.txValue):void 0!==e.value&&(t.disabled=""===t.txTo||!o.isAddress(t.txTo)||""===e.value||"0"===o.toWei(e.value)),t.disabled){n.next=17;break}if((r=t.tokens[t.txTokenId]).address!==t.tokens[0].address){n.next=10;break}return n.next=6,t.estimateFee({from:t.account,to:t.txTo,value:o.toWei(t.txValue)});case 6:t.fee=n.sent,t.fee&&o.toBN(o.toWei(t.tokens[0].balance)).lt(o.toBN(o.toWei(t.fee)).add(o.toBN(o.toWei(t.txValue))))&&(t.fee=null),n.next=14;break;case 10:return c=t.contracts.erc20.methods.transfer(t.txTo,o.toWei(t.txValue)).encodeABI(),n.next=13,t.estimateFee({from:t.account,to:r.address,data:c});case 13:t.fee=n.sent;case 14:t.fee?t.feeState="":(t.fee="n/a",t.feeState="is-danger",t.disabled=!0),n.next=19;break;case 17:t.fee="",t.feeState="";case 19:case"end":return n.stop()}}),n)})))()},createRawTx:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.disabled){t.next=12;break}if((n=e.tokens[e.txTokenId]).address!==e.tokens[0].address){t.next=7;break}return t.next=5,e.sendTransaction("Transfer",{from:e.account,to:e.txTo,value:o.toWei(e.txValue)});case 5:t.next=10;break;case 7:return r=e.contracts.erc20.methods.transfer(e.txTo,o.toWei(e.txValue)).encodeABI(),t.next=10,e.sendTransaction("Transfer",{from:e.account,to:n.address,data:r});case 10:e.txValue="0.0",e.txTo=null;case 12:case"end":return t.stop()}}),t)})))()}}},l=n(27),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("fieldset",{attrs:{disabled:e.busy||!e.account}},[n("label",{staticClass:"label has-text-left is-size-7"},[e._v("Value")]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control has-icons-left is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.txValue,expression:"txValue"}],staticClass:"input is-rounded is-family-monospace",attrs:{type:"number"},domProps:{value:e.txValue},on:{input:function(t){t.target.composing||(e.txValue=t.target.value)}}}),e._v(" "),n("span",{staticClass:"icon is-small is-left"},[n("img",{attrs:{src:e.tokens[e.txTokenId].icon}})])]),e._v(" "),n("p",{staticClass:"control"},[n("span",{staticClass:"select is-rounded",on:{change:e.onChangeCurrency}},[n("select",e._l(e.tokens,(function(t){return n("option",{key:t.name,domProps:{value:t.name}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])})),0)])])])])]),e._v(" "),n("p",{staticClass:"help has-text-left"},[e._v("\n        "+e._s("balance: "+e.tokens[e.txTokenId].balance)+"\n      ")])]),e._v(" "),n("label",{staticClass:"label has-text-left is-size-7"},[e._v("To (address)")]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.txTo,expression:"txTo"}],class:"input is-rounded is-family-monospace "+e.feeState,attrs:{type:"text"},domProps:{value:e.txTo},on:{input:function(t){t.target.composing||(e.txTo=t.target.value)}}})]),e._v(" "),n("p",{staticClass:"control"},[n("a",{class:"button is-rounded "+e.feeState,attrs:{disabled:e.disabled},on:{click:function(){e.createRawTx()}}},[e._m(0)])])])])]),e._v(" "),n("p",{class:"help has-text-left "+e.feeState},[e._v("\n        "+e._s("fee: "+(e.fee?e.fee:""))+"\n      ")])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-share"})])}],!1,null,null,null);t.default=component.exports},765:function(e,t,n){"use strict";n.r(t);n(14),n(35),n(760),n(25);var r=n(6),o=n(204),c={props:{account:{type:String,default:null},tokens:{type:Array,default:function(){return[]}},busy:{type:Boolean,default:!1},contracts:{type:Object,default:null},estimateFee:{type:Function,default:function(e){return null}},sendTransaction:{type:Function,default:function(e){}},settings:{type:Object,default:null}},data:function(){return{fee:"",feeState:"",disabled:!0,sellTokenId:0,sellValue:"0.0",buyTokenId:1,buyValue:"0.0"}},watch:{sellValue:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.estimateExchange(e);case 2:case"end":return n.stop()}}),n)})))()}},methods:{onChangeSell:function(e){switch(e.target.value){case"CELO":this.fee="",this.feeState="",this.disabled=!0,this.sellTokenId=0,this.sellValue="0.0",this.buyTokenId=1,this.buyValue="0.0";break;case"cUSD":this.fee="",this.feeState="",this.disabled=!0,this.sellTokenId=1,this.sellValue="0.0",this.buyTokenId=0,this.buyValue="0.0"}},getMinBuyAmount:function(){return o.toBN(o.toWei(this.buyValue)).mul(o.toBN(parseInt(1e3-10*this.settings.slippageTolerance))).div(o.toBN(1e3)).toString()},updateFee:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,c,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.toWei(t.sellValue),r=t.tokens[t.sellTokenId],c=t.tokens[t.buyTokenId],!(r.address===t.tokens[0].address&&c.address===t.tokens[1].address||r.address===t.tokens[1].address&&c.address===t.tokens[0].address)){e.next=12;break}return l=t.getMinBuyAmount(),d=r.address===t.tokens[0].address,f=t.contracts.exchange.methods.exchange(n,l,d).encodeABI(),e.next=9,t.estimateFee({from:t.account,to:t.contracts.exchange.options.address,data:f});case 9:t.fee=e.sent,d&&t.fee&&o.toBN(o.toWei(r.balance)).lt(o.toBN(o.toWei(t.fee)).add(o.toBN(n)))&&(t.fee=null),t.fee?t.feeState="":(t.fee="n/a",t.feeState="is-danger",t.disabled=!0);case 12:case"end":return e.stop()}}),e)})))()},estimateExchange:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=6;break}return t.fee="",t.feeState="",t.disabled=!0,t.buyValue="0.0",n.abrupt("return");case 6:if("0"!==(r=o.toWei(e))){n.next=13;break}return t.fee="",t.feeState="",t.disabled=!0,t.buyValue="0.0",n.abrupt("return");case 13:if(c=t.tokens[t.sellTokenId],l=t.tokens[t.buyTokenId],!(c.address===t.tokens[0].address&&l.address===t.tokens[1].address||c.address===t.tokens[1].address&&l.address===t.tokens[0].address)){n.next=25;break}return d=t.tokens[t.sellTokenId].address===t.tokens[0].address,n.t0=o,n.next=20,t.contracts.exchange.methods.getBuyTokenAmount(r,d).call();case 20:return n.t1=n.sent,t.buyValue=n.t0.fromWei.call(n.t0,n.t1),t.disabled=!1,n.next=25,t.updateFee(e);case 25:case"end":return n.stop()}}),n)})))()},calcOutput:function(e,t,n,r,c,l){if(0===l)return n;var d=t.mul(e),f=d.mul(c),m=d.add(r.mul(o.toBN("10000")));return n=n.add(f.div(m)),this.calcOutput(e,t,n,r.add(t),c.sub(n),l-1)},calculate:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,c,l,d,f,m,v,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.tokens[e.sellTokenId].address===e.tokens[0].address,t.next=3,e.contracts.exchange.methods.getBuyAndSellBuckets(n).call();case 3:return r=t.sent,t.next=6,e.contracts.exchange.methods.spread().call();case 6:c=t.sent,l=o.toBN("1000000000000000000000000").sub(o.toBN(c)).div(o.toBN("100000000000000000000")),d=o.toBN(r[0]),f=o.toBN(r[1]),m=o.toBN(o.toWei(e.sellValue)),v=o.toBN("0"),1,h=e.calcOutput(l,m.div(o.toBN(1..toString())),v,f,d,1),console.log(o.fromWei(h.toString()));case 15:case"end":return t.stop()}}),t)})))()},createRawTx:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,c,l,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.disabled){t.next=12;break}if(n=o.toWei(e.sellValue),r=e.tokens[e.sellTokenId],c=e.tokens[e.buyTokenId],!(r.address===e.tokens[0].address&&c.address===e.tokens[1].address||r.address===e.tokens[1].address&&c.address===e.tokens[0].address)){t.next=10;break}return l=e.getMinBuyAmount(),d=r.address===e.tokens[0].address,f=e.contracts.exchange.methods.exchange(n,l,d).encodeABI(),t.next=10,e.sendTransaction("Exchange",{from:e.account,to:e.contracts.exchange.options.address,data:f});case 10:e.sellValue="0.0",e.buyValue="0.0";case 12:case"end":return t.stop()}}),t)})))()}}},l=n(27),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("fieldset",{attrs:{disabled:e.busy||!e.account}},[n("label",{staticClass:"label has-text-left is-size-7"},[e._v("Sell")]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control has-icons-left is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.sellValue,expression:"sellValue"}],staticClass:"input is-rounded is-family-monospace",attrs:{type:"number"},domProps:{value:e.sellValue},on:{input:function(t){t.target.composing||(e.sellValue=t.target.value)}}}),e._v(" "),n("span",{staticClass:"icon is-small is-left"},[n("img",{attrs:{src:e.tokens[e.sellTokenId].icon}})])]),e._v(" "),n("p",{staticClass:"control"},[n("span",{staticClass:"select is-rounded",on:{change:e.onChangeSell}},[n("select",e._l(e.tokens,(function(t){return n("option",{key:t.name,domProps:{value:t.name}},[e._v("\n                    "+e._s(t.name)+"\n                  ")])})),0)])])])])]),e._v(" "),n("p",{staticClass:"help has-text-left"},[e._v("\n        "+e._s("balance: "+e.tokens[e.sellTokenId].balance)+"\n      ")])]),e._v(" "),n("label",{staticClass:"label has-text-left is-size-7"},[e._v("Buy (estimated)")]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control has-icons-left is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.buyValue,expression:"buyValue"}],class:"input is-rounded is-family-monospace "+e.feeState,attrs:{type:"number",readonly:""},domProps:{value:e.buyValue},on:{input:function(t){t.target.composing||(e.buyValue=t.target.value)}}}),e._v(" "),n("span",{staticClass:"icon is-small is-left"},[n("img",{attrs:{src:e.tokens[e.buyTokenId].icon}})])]),e._v(" "),n("p",{staticClass:"control"},[n("a",{class:"button is-rounded "+e.feeState,attrs:{disabled:e.disabled},on:{click:function(t){return e.createRawTx()}}},[e._m(0)])])])])]),e._v(" "),n("p",{class:"help has-text-left "+e.feeState},[e._v("\n        "+e._s("fee: "+(e.fee?e.fee:""))+"\n      ")])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-exchange-alt"})])}],!1,null,null,null);t.default=component.exports},766:function(e,t,n){"use strict";n.r(t);n(25);var r=n(6),o=n(204),c={props:{linkAddress:{type:String,default:null},account:{type:String,default:null},tokens:{type:Array,default:function(){return[]}},busy:{type:Boolean,default:!1},contracts:{type:Object,default:null},estimateFee:{type:Function,default:function(e){return null}},sendTransaction:{type:Function,default:function(e){}},settings:{type:Object,default:function(){return{slippageTolerance:null,transactionDeadline:null}}}},data:function(){return{modeSelect:0}},watch:{settings:{deep:!0,handler:function(e){e.slippageTolerance>20?e.slippageTolerance=20:e.slippageTolerance<0&&(e.slippageTolerance=0),this.$emit("update",e)}}},methods:{createRawTx:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.approve.fee){n.next=5;break}return r=o.hexToNumberString("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),c=t.contracts.erc20.methods.approve(t.contracts.exchange.options.address,o.toWei(r)).encodeABI(),n.next=5,t.sendTransaction("Approve",{from:t.account,to:e.address,data:c});case 5:case"end":return n.stop()}}),n)})))()}}},l=n(27),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("fieldset",{attrs:{disabled:e.busy||!e.account}},[n("label",{staticClass:"label has-text-left is-size-7"},[e._v("Slippage tolerance")]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control has-icons-left is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.slippageTolerance,expression:"settings.slippageTolerance"}],staticClass:"input is-rounded is-family-monospace",attrs:{type:"number",step:"0.1",min:"0",max:"20"},domProps:{value:e.settings.slippageTolerance},on:{input:function(t){t.target.composing||e.$set(e.settings,"slippageTolerance",t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),e._m(1)])])]),e._v(" "),n("p",{staticClass:"help has-text-left"},[e._v("\n        Transaction will revert if the price is too expensive.\n      ")])]),e._v(" "),n("label",{staticClass:"label has-text-left is-size-7"},[e._v("Transaction deadline")]),e._v(" "),n("div",{staticClass:"field"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("p",{staticClass:"control has-icons-left is-expanded"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.settings.transactionDeadline,expression:"settings.transactionDeadline"}],staticClass:"input is-rounded is-family-monospace",attrs:{type:"number"},domProps:{value:e.settings.transactionDeadline},on:{input:function(t){t.target.composing||e.$set(e.settings,"transactionDeadline",t.target.value)}}}),e._v(" "),e._m(2)]),e._v(" "),e._m(3)])])]),e._v(" "),n("p",{staticClass:"help has-text-left"},[e._v("\n        Transaction will revert if pending is too long.\n      ")])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-left"},[t("i",{staticClass:"fas fa-undo"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"control"},[t("a",{staticClass:"button is-static is-rounded"},[this._v("\n                %\n              ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-left"},[t("i",{staticClass:"fas fa-stopwatch"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"control"},[t("a",{staticClass:"button is-static is-rounded"},[this._v("\n                minutes\n              ")])])}],!1,null,null,null);t.default=component.exports},767:function(e,t,n){"use strict";n.r(t);n(36),n(14),n(35),n(25);var r=n(6),o=n(417),c=n(561),l=n(247),d=n(757),f="initializing...",m="loading...",v={data:function(){return{loading:m,account:null,kit:null,web3:null,gasPrice:0,contracts:{erc20:null,goldToken:null,stableToken:null,exchange:null,factory:null,pair:null},networks:[{name:"Mainnet",provider:"https://rc1-forno.celo-testnet.org",blockscout:"https://explorer.celo.org"},{name:"Baklava",provider:"https://baklava-forno.celo-testnet.org",blockscout:"https://baklava-blockscout.celo-testnet.org"},{name:"Alfajores",provider:"https://alfajores-forno.celo-testnet.org",blockscout:"https://alfajores-blockscout.celo-testnet.org"}],networkSelect:0,tokens:[{name:"CELO",icon:"/celo-metamask-signer-sample/icon-celo-CELO-dark-f.svg",address:null,balance:m,approve:{value:m,fee:!1}},{name:"cUSD",icon:"/celo-metamask-signer-sample/icon-celo-dollar-black-f.svg",address:null,balance:m,approve:{value:m,fee:!1}}],modeSelect:0,busy:!1,modal:{enable:!1,title:"",message:"Sending Transaction....",txReceipt:null},settings:{slippageTolerance:.5,transactionDeadline:20}}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===window.ethereum||!window.ethereum.isMetaMask){t.next=6;break}return t.next=3,window.ethereum.enable();case 3:e.web3=new l(window.ethereum),e.onChangeNetwork(e.networkSelect),window.ethereum.on("accountsChanged",e.onAccountChanged);case 6:case"end":return t.stop()}}),t)})))()},methods:{sendTransaction:function(title,e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t.busy=!0,t.modal.title=title,t.modal.message="Sending Transaction....",n.next=6,Object(o.sendTransaction)(t.kit,t.web3,e);case 6:return r=n.sent,t.modal.enable=!0,n.next=10,r.waitReceipt();case 10:return t.modal.txReceipt=n.sent,t.modal.message="Transaction success",n.next=14,t.updateMainBalance();case 14:t.busy=!1,n.next=22;break;case 17:n.prev=17,n.t0=n.catch(0),console.log(n.t0),t.modal.message="Transaction fail",t.busy=!1;case 22:case"end":return n.stop()}}),n,null,[[0,17]])})))()},estimateFee:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(o.estimateGas)(t.kit,e);case 3:return r=n.sent,n.abrupt("return",t.kit.web3.utils.fromWei(t.kit.web3.utils.toBN(r).mul(t.kit.web3.utils.toBN(t.gasPrice))));case 7:return n.prev=7,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",null);case 11:case"end":return n.stop()}}),n,null,[[0,7]])})))()},onChangeNetwork:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.web3||t.kit&&t.networkSelect===e){n.next=27;break}return t.loading=f,t.networkSelect=e,t.kit=null,t.contracts.goldToken=null,t.contracts.stableToken=null,t.contracts.exchange=null,t.kit=c.newKit(t.networks[e].provider),n.next=10,t.kit.web3.eth.getGasPrice();case 10:return t.gasPrice=n.sent,t.contracts.erc20=new t.kit.web3.eth.Contract(d),n.next=14,t.kit._web3Contracts.getGoldToken();case 14:return t.contracts.goldToken=n.sent,n.next=17,t.kit._web3Contracts.getStableToken();case 17:return t.contracts.stableToken=n.sent,n.next=20,t.kit._web3Contracts.getExchange();case 20:return t.contracts.exchange=n.sent,n.t0=t,n.next=24,t.web3.eth.getAccounts();case 24:return n.t1=n.sent,n.next=27,n.t0.onAccountChanged.call(n.t0,n.t1);case 27:case"end":return n.stop()}}),n)})))()},onAccountChanged:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!e.length){n.next=7;break}for(t.loading=f,i=0;i<t.tokens.length;i++)t.tokens.address=null,t.tokens.balance=m,t.tokens.approve={value:m,fee:!1};return t.account=e[0],n.next=6,t.updateMainBalance();case 6:t.loading=null;case 7:case"end":return n.stop()}}),n)})))()},updateMainBalance:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.kit.getTotalBalance(e.account);case 2:for(n=t.sent,i=0;i<2;i++)e.tokens[i].balance=e.kit.web3.utils.fromWei(n[e.tokens[i].name].toString());return e.tokens[0].address=e.contracts.goldToken.options.address,t.next=7,e.allowance(e.tokens[0]);case 7:return e.tokens[1].address=e.contracts.stableToken.options.address,t.next=10,e.allowance(e.tokens[1]);case 10:case"end":return t.stop()}}),t)})))()},getBalance:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.contracts.erc20.methods.balanceOf(t.account).encodeABI(),n.next=3,t.kit.web3.eth.call({from:t.account,to:e.address,data:r});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},allowance:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.contracts.erc20.methods.allowance(t.account,t.contracts.exchange.options.address).encodeABI(),n.next=3,t.kit.web3.eth.call({from:t.account,to:e.address,data:r});case 3:return o=n.sent,r=t.contracts.erc20.methods.approve(t.contracts.exchange.options.address,t.kit.web3.utils.toWei(e.balance)).encodeABI(),n.next=7,t.estimateFee({from:t.account,to:e.address,data:r});case 7:c=n.sent,e.approve={value:t.kit.web3.utils.fromWei(o),fee:t.kit.web3.utils.toBN(t.kit.web3.utils.toWei(c)).lt(t.kit.web3.utils.toBN(t.kit.web3.utils.toWei(t.tokens[0].balance)))&&t.kit.web3.utils.toBN(o).lt(t.kit.web3.utils.toBN(t.kit.web3.utils.toWei(e.balance)))};case 9:case"end":return n.stop()}}),n)})))()}}},h=(n(758),n(27)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{class:"pageloader"+(e.loading?" is-active":"")},[n("span",{staticClass:"title"},[e._v(e._s(e.loading))])]),e._v(" "),n("nav",{staticClass:"navbar is-fixed-top is-dark"},[n("div",{staticClass:"container"},[e._m(0),e._v(" "),n("div",{staticClass:"navbar-menu",attrs:{id:"cloneNavbarMenu"}},[n("div",{staticClass:"navbar-end"},[n("div",{staticClass:"navbar-item"},[n("div",{staticClass:"field-body"},[n("div",{staticClass:"field is-expanded"},[n("div",{staticClass:"field has-addons"},[n("div",{staticClass:"control dropdown is-hoverable"},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button is-small is-rounded",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[e._v("\n                        "+e._s(e.networks[e.networkSelect].name)+"\n                      ")])]),e._v(" "),n("div",{staticClass:"dropdown-menu"},[n("div",{staticClass:"dropdown-content"},e._l(e.networks,(function(t,r){return n("a",{key:r,staticClass:"navbar-item",on:{click:function(t){return e.onChangeNetwork(r)}}},[e._v("\n                          "+e._s(t.name)+"\n                        ")])})),0)])]),e._v(" "),n("div",{staticClass:"control dropdown is-hoverable"},[e._m(1),e._v(" "),n("div",{staticClass:"dropdown-menu"},[n("div",{staticClass:"dropdown-content"},[n("Balance",{attrs:{account:e.account,tokens:[e.tokens[0],e.tokens[1]],busy:e.busy,contracts:e.contracts,"estimate-fee":e.estimateFee,"send-transaction":e.sendTransaction,settings:e.settings},on:{update:function(t){e.settings.slippageTolerance=t.slippageTolerance,e.settings.transactionDeadline=t.transactionDeadline}}})],1)])]),e._v(" "),n("p",{class:"control is-expanded "+(e.account?"":"is-loading")},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.account,expression:"account"}],staticClass:"input is-small is-rounded is-family-monospace",attrs:{placeholder:"Loading...",type:"text",readonly:""},domProps:{value:e.account},on:{input:function(t){t.target.composing||(e.account=t.target.value)}}})]),e._v(" "),n("p",{staticClass:"control"},[n("a",{staticClass:"button is-small is-rounded",attrs:{disabled:!e.account,href:e.networks[e.networkSelect].blockscout+"/address/"+e.account,target:"_blank",rel:"noopener noreferrer"}},[e._m(2)])])])])])])])])])]),e._v(" "),n("div",{staticClass:"section"},[n("div",{staticClass:"pt-5"},[n("div",{staticClass:"container"},[n("div",{staticClass:"main is-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"tabs is-boxed is-small"},[n("ul",[n("li",{class:0===e.modeSelect?"is-active":"",on:{click:function(t){e.modeSelect=0}}},[e._m(3)]),e._v(" "),n("li",{class:1===e.modeSelect?"is-active":"",on:{click:function(t){e.modeSelect=1}}},[e._m(4)]),e._v(" "),n("li",{class:2===e.modeSelect?"is-active":"",on:{click:function(t){e.modeSelect=2}}},[e._m(5)])])]),e._v(" "),n("div",{staticClass:"pb-3"},[0===e.modeSelect?n("section",{staticClass:"animated fadeIn faster"},[n("Transfer",{attrs:{account:e.account,tokens:e.tokens,busy:e.busy,contracts:e.contracts,"estimate-fee":e.estimateFee,"send-transaction":e.sendTransaction}})],1):e._e(),e._v(" "),1===e.modeSelect?n("section",{staticClass:"animated fadeIn faster"},[n("Exchange",{attrs:{account:e.account,tokens:e.tokens,busy:e.busy,contracts:e.contracts,"estimate-fee":e.estimateFee,"send-transaction":e.sendTransaction,settings:e.settings}})],1):e._e(),e._v(" "),2===e.modeSelect?n("section",{staticClass:"animated fadeIn faster"},[n("Settings",{attrs:{account:e.account,tokens:[e.tokens[0],e.tokens[1]],busy:e.busy,contracts:e.contracts,"estimate-fee":e.estimateFee,"send-transaction":e.sendTransaction,settings:e.settings},on:{update:function(t){e.settings.slippageTolerance=t.slippageTolerance,e.settings.transactionDeadline=t.transactionDeadline}}})],1):e._e()])])])])]),e._v(" "),n("div",{class:"modal is-active animated "+(e.modal.enable?"slideInDown":"slideOutUp")+" faster"},[n("div",{staticClass:"modal-background"}),e._v(" "),n("div",{staticClass:"modal-card"},[n("header",{staticClass:"modal-card-head"},[n("p",{staticClass:"modal-card-title"},[e._v("\n              "+e._s(e.modal.title)+"\n            ")]),e._v(" "),n("button",{staticClass:"delete",attrs:{"aria-label":"close"},on:{click:function(t){e.modal.enable=!1}}})]),e._v(" "),n("section",{staticClass:"modal-card-body"},[e._v("\n            "+e._s(e.modal.message)+"\n          ")]),e._v(" "),n("footer",{staticClass:"modal-card-foot",staticStyle:{"justify-content":"flex-end"}},[e.modal.txReceipt?n("a",{staticClass:"button is-small",attrs:{href:e.networks[e.networkSelect].blockscout+"/tx/"+(e.modal.txReceipt?e.modal.txReceipt.transactionHash:""),target:"_blank"}},[e._m(6),e._v(" "),n("span",[e._v("BlockScout")])]):n("a",{staticClass:"button is-small is-loading",attrs:{disabled:""}},[e._m(7),e._v(" "),n("span",[e._v("BlockScout")])])])])])])]),e._v(" "),e._m(8)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"navbar-brand"},[t("a",{staticClass:"navbar-item",attrs:{href:"/"}},[t("img",{attrs:{src:"/celo-metamask-signer-sample/icon-celo-CELO-color-500.png",alt:""}}),this._v(" "),t("span",{staticClass:"brand-name is-size-5"},[this._v("Â "),t("strong",[this._v("DexFair")])])]),this._v(" "),t("span",{staticClass:"navbar-burger burger",attrs:{"data-target":"cloneNavbarMenu"}},[t("span"),this._v(" "),t("span"),this._v(" "),t("span")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dropdown-trigger"},[t("button",{staticClass:"button is-small is-rounded",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[t("i",{staticClass:"fas fa-wallet"})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-search"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-share"})]),this._v(" "),t("span",[this._v("Transfer")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-exchange-alt"})]),this._v(" "),t("span",[this._v("Exchange")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("a",[t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-cog"})]),this._v(" "),t("span",[this._v("Settting")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-cubes"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"icon is-small"},[t("i",{staticClass:"fas fa-cubes"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("footer",{staticClass:"footer"},[t("div",{staticClass:"content has-text-centered"},[t("p",[t("strong",[this._v("DexFair")]),this._v(" by "),t("strong",[this._v("DaoAuth")]),this._v(".\n      ")])])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{Balance:n(763).default,Transfer:n(764).default,Exchange:n(765).default,Settings:n(766).default})}}]);